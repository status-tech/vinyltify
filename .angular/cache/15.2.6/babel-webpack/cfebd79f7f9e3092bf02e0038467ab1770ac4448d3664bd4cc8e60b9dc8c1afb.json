{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nexport let DiskComponent = /*#__PURE__*/(() => {\n  class DiskComponent {\n    constructor(authService, route) {\n      this.authService = authService;\n      this.route = route;\n      this.actual = 'b1';\n    }\n    ngOnInit() {\n      const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n      if (tieneError == false) {\n        // @ts-ignore\n        const token = this.route.snapshot.fragment.split('&').find(fragment => fragment.includes('access_token')).split('=')[1];\n        // Guardar el token de acceso en el servicio de autenticación\n        this.authService.setAccessToken(token);\n        this.getMe();\n        this.getMyTracks('short_term');\n      } else {\n        this.logout();\n      }\n    }\n    getMe() {\n      var a = this.authService.getApi().getMe();\n      a.then(data => {\n        const elemento = document.getElementById('nombreCliente');\n        if (data.display_name) {\n          elemento.outerHTML = data.display_name;\n        } else {\n          elemento.outerHTML = data.id;\n        }\n      });\n    }\n    abrir(link) {\n      window.open(link, '_blank');\n    }\n    ponerFoto(link) {\n      const album = document.getElementById('fotoAlbum');\n      album.style.backgroundImage = `url('${link}')`;\n    }\n    modificadorBoton(time) {\n      var but = null;\n      const tipo = document.getElementById('tipo');\n      if (time == 'short_term') {\n        but = 'b1';\n        tipo.innerHTML = 'Last Month';\n      } else if (time == 'medium_term') {\n        but = 'b2';\n        tipo.innerHTML = 'Last 6 Months';\n      } else {\n        but = 'b3';\n        tipo.innerHTML = 'All Time';\n      }\n      const aux = document.getElementById(this.actual);\n      aux.className = 'btn btn-outline-secondary btn-lg btn-block rounded';\n      const tmp = document.getElementById(but);\n      tmp.className = 'btn btn-secondary btn-lg btn-block rounded';\n      this.actual = but;\n    }\n    getMyTracks(time) {\n      this.modificadorBoton(time);\n      this.authService.getApi().getMyTopTracks({\n        time_range: time,\n        limit: 10\n      }).then(response => {\n        this.ponerFoto(response.items[0].album.images[0].url);\n        for (let i = 0; i < response.items.length; i++) {\n          const cancion = document.getElementById(`cancion${i + 1}`);\n          cancion.innerHTML = `${i + 1}. ${response.items[i].name}`;\n          cancion.className = 'cursor';\n          cancion.addEventListener('click', () => {\n            this.abrir(response.items[i].uri);\n          });\n        }\n      }, err => {\n        this.logout();\n      });\n    }\n    logout() {\n      this.authService.logout();\n    }\n  }\n  DiskComponent.ɵfac = function DiskComponent_Factory(t) {\n    return new (t || DiskComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  DiskComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DiskComponent,\n    selectors: [[\"app-disk\"]],\n    decls: 38,\n    vars: 0,\n    consts: [[1, \"centrado\", 2, \"margin-left\", \"70px\"], [\"src\", \"assets/nombre_transparente.png\", \"width\", \"500px\"], [1, \"centrado\", 2, \"margin-top\", \"10px\"], [\"id\", \"b1\", \"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [\"id\", \"b2\", \"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [\"id\", \"b3\", \"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [1, \"centrado\", 2, \"margin-top\", \"10px\", \"margin-left\", \"30px\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [\"id\", \"img\", 2, \"position\", \"relative\", \"left\", \"0px\", \"bottom\", \"0px\"], [\"id\", \"fotoAlbum\", 1, \"album-cover\", \"eye\"], [1, \"vinyl-cover\"], [1, \"album-info\", \"texto\"], [\"id\", \"albumName\"], [\"id\", \"nombreCliente\"], [1, \"song-list\"], [1, \"column\"], [1, \"texto\"], [\"id\", \"cancion1\"], [\"id\", \"cancion2\", 1, \"back\"], [\"id\", \"cancion3\", 1, \"back\"], [\"id\", \"cancion4\", 1, \"back\"], [\"id\", \"cancion5\", 1, \"back\"], [\"id\", \"cancion6\", 1, \"back\"], [\"id\", \"cancion7\", 1, \"back\"], [\"id\", \"cancion8\", 1, \"back\"], [\"id\", \"cancion9\", 1, \"back\"], [\"id\", \"cancion10\", 1, \"back\"], [\"id\", \"tipo\"], [\"src\", \"assets/vinyl2.png\", 1, \"heaven\"]],\n    template: function DiskComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"img\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_3_listener() {\n          return ctx.getMyTracks(\"short_term\");\n        });\n        i0.ɵɵtext(4, \"Last Month\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_5_listener() {\n          return ctx.getMyTracks(\"medium_term\");\n        });\n        i0.ɵɵtext(6, \"Last 6 Months\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_7_listener() {\n          return ctx.getMyTracks(\"long_term\");\n        });\n        i0.ɵɵtext(8, \"All Time\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_10_listener() {\n          return ctx.logout();\n        });\n        i0.ɵɵtext(11, \"Logout\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9);\n        i0.ɵɵelement(14, \"div\", 10);\n        i0.ɵɵelementStart(15, \"div\", 11)(16, \"h1\", 12);\n        i0.ɵɵtext(17, \"VINYLTIFY\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"h2\", 13);\n        i0.ɵɵtext(19, \"Artista\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 14)(21, \"div\", 15)(22, \"ul\", 16);\n        i0.ɵɵelement(23, \"li\", 17)(24, \"li\", 18)(25, \"li\", 19)(26, \"li\", 20)(27, \"li\", 21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"div\", 15)(29, \"ul\", 16);\n        i0.ɵɵelement(30, \"li\", 22)(31, \"li\", 23)(32, \"li\", 24)(33, \"li\", 25)(34, \"li\", 26);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(35, \"h3\", 27);\n        i0.ɵɵtext(36, \"Artista\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(37, \"img\", 28);\n        i0.ɵɵelementEnd();\n      }\n    }\n  });\n  DiskComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: DiskComponent,\n    factory: DiskComponent.ɵfac,\n    providedIn: 'root'\n  });\n  return DiskComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}